{% extends "base.html" %} 
{% load static %} 
{% block content %}
<div class="container mt-5">
  <h2 class="text-center">Avaliações Agendadas</h2>
  
  {% if scheduled_evaluations %}
  <form action="{% url 'delete_selected_schedules' %}" method="POST">
    {% csrf_token %}
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="thead-dark">
          <tr>
            <th><input type="checkbox" id="select-all"></th>
            <th>Avaliador</th>
            <th>Avaliado</th>
            <th>Cliente</th>
            <th>Data Agendada</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for schedule in scheduled_evaluations %}
          <tr>
            <td><input type="checkbox" name="schedules" value="{{ schedule.id }}"></td>
            <td>{{ schedule.evaluator.username }}</td>
            <td>{{ schedule.evaluatee.username }}</td>
            <td>{{ schedule.client.name }}</td>
            <td>{{ schedule.date_scheduled|date:"d/m/Y" }}</td>
            <td>
              <a href="{% url 'edit_schedule' schedule.id %}" class="btn btn-primary">Editar</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <button type="submit" class="btn btn-danger mt-3" onclick="return confirm('Tem certeza que deseja excluir os agendamentos selecionados?')">Excluir Selecionados</button>
  </form>
  
  {% else %}
  <p class="text-center">Não há avaliações agendadas.</p>
  {% endif %}
</div>

<script>
  // Script para selecionar todos os checkboxes
  document.getElementById('select-all').onclick = function() {
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');
    for (var checkbox of checkboxes) {
      checkbox.checked = this.checked;
    }
  }
</script>
{% endblock %}
