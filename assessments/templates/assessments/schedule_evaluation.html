<!-- templates/assessments/schedule_evaluation.html -->

{% extends 'base.html' %}

{% block content %}


<h2>Agendar Avaliações</h2>
<form method="post">
    {% csrf_token %}
    <div class="form-group">
        {{ form.name.label_tag }} {{ form.name }}
    </div>
    <div class="form-group">
        {{ form.client.label_tag }} {{ form.client }}
    </div>
    <div class="form-group">
        {{ form.date_scheduled.label_tag }} {{ form.date_scheduled }}
    </div>
    <div class="form-group">
        {{ form.responsible.label_tag }} {{ form.responsible }}
    </div>
    <div class="form-group">
        {{ form.evaluator.label_tag }} {{ form.evaluator }}
    </div>
    <div class="form-group">
        {{ form.evaluatees.label_tag }} {{ form.evaluatees }}
    </div>
    <div class="form-group">
        {{ form.commitment.label_tag }} {{ form.commitment }}
    </div>
    <div class="form-group" id="other-commitment-field" style="display: none;">
        {{ form.other_commitment.label_tag }} {{ form.other_commitment }}
    </div>
    <button type="submit" class="btn btn-primary">Agendar</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var commitmentField = document.getElementById('id_commitment');
        var otherCommitmentField = document.getElementById('other-commitment-field');
        var otherCommitmentInput = document.getElementById('id_other_commitment');

        function toggleOtherCommitment() {
            if (commitmentField.value === 'Outros') {
                otherCommitmentField.style.display = 'block';
                otherCommitmentInput.required = true;
            } else {
                otherCommitmentField.style.display = 'none';
                otherCommitmentInput.required = false;
                otherCommitmentInput.value = '';
            }
        }

        commitmentField.addEventListener('change', toggleOtherCommitment);
        toggleOtherCommitment();
    });
</script>
{% endblock %}
